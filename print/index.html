<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/slides-iac-challenger/styles.17688bf161536f03a1ce.css" id="gatsby-global-css">@font-face{font-family:Victor Mono;src:url(/slides-iac-challenger/static/VictorMono-Regular-f95855dd4658670132b8b6cbe42a88ec.woff2) format("woff2"),url(/slides-iac-challenger/static/VictorMono-Regular-7a094327622438e2269a7c3526e333fd.woff) format("woff");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:Victor Mono;src:url(/slides-iac-challenger/static/VictorMono-Italic-6588c79cebc71a81c08c98424bf502dc.woff2) format("woff2"),url(/slides-iac-challenger/static/VictorMono-Italic-ebd04bcdcf51ba0e11b379dfd3618cbb.woff) format("woff");font-weight:400;font-style:italic;font-display:swap}@font-face{font-family:Victor Mono;src:url(/slides-iac-challenger/static/VictorMono-Bold-bfa75b799edcec2033874651164eea94.woff2) format("woff2"),url(/slides-iac-challenger/static/VictorMono-Bold-06e59833dd1116b181592bb803adc4a0.woff) format("woff");font-weight:700;font-style:normal;font-display:swap}@font-face{font-family:Victor Mono;src:url(/slides-iac-challenger/static/VictorMono-BoldItalic-9f8e9ecd364655cf932bc08fb5fac53f.woff2) format("woff2"),url(/slides-iac-challenger/static/VictorMono-BoldItalic-99a3cb2e4903d250687740bf51ffc1fd.woff) format("woff");font-weight:700;font-style:italic;font-display:swap}</style><meta name="generator" content="Gatsby 2.32.13"/><title data-react-helmet="true">IaC Challenger</title><link data-react-helmet="true" rel="stylesheet" href="https://fonts.googleapis.com/css?family=IBM+Plex+Mono|Inter"/><link as="script" rel="preload" href="/slides-iac-challenger/webpack-runtime-414f95d41cdfda2cd194.js"/><link as="script" rel="preload" href="/slides-iac-challenger/framework-ed27f52ff8eaea3694b1.js"/><link as="script" rel="preload" href="/slides-iac-challenger/styles-29163f9dced6fe4a408a.js"/><link as="script" rel="preload" href="/slides-iac-challenger/app-78635804c9e92eb3a3e9.js"/><link as="script" rel="preload" href="/slides-iac-challenger/component---node-modules-gatsby-theme-mdx-deck-src-templates-deck-js-b1b9b44d697ce1372ba8.js"/><link as="fetch" rel="preload" href="/slides-iac-challenger/page-data/print/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/slides-iac-challenger/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>(function() { try {
        var mode = localStorage.getItem('theme-ui-color-mode');
        if (!mode) return
        document.body.classList.add('theme-ui-' + mode);
      } catch (e) {} })();</script><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="ut8w6s">body{margin:0;overflow:hidden;}</style><style data-emotion-css="bdfrlc">.css-bdfrlc{width:100vw;height:100vh;}.css-bdfrlc *{box-sizing:border-box;}</style><div class="css-bdfrlc"><div style="outline:none;height:100%" tabindex="-1"><style data-emotion-css="gelidi">.css-gelidi{box-sizing:border-box;width:100%;height:100vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;overflow:hidden;position:relative;color:var(--theme-ui-colors-text,#fff);background-color:var(--theme-ui-colors-background,#1B2B34);font-family:"Inter";font-size:24px;}@media screen and (min-width:40em){.css-gelidi{font-size:32px;}}@media screen and (min-width:52em){.css-gelidi{font-size:48px;}}@media screen and (min-width:64em){.css-gelidi{font-size:64px;}}</style><div class="css-gelidi"><style data-emotion-css="11kbfa7">.css-11kbfa7{font-family:inherit;line-height:1.125;font-weight:100;margin:0 0 10px;}</style><h2 class="css-11kbfa7">IaC Challenger</h2></div><div class="css-gelidi"><h2 class="css-11kbfa7">IaC Challenger | Terraform</h2><style data-emotion-css="16wqnxf">.css-16wqnxf{margin:0;list-style:none;padding-inline-start:0;}</style><ul class="css-16wqnxf"><style data-emotion-css="1wvf2dc">.css-1wvf2dc{text-align:center;margin:10px 0;}</style><li class="css-1wvf2dc"><style data-emotion-css="1dn4en8">.css-1dn4en8{color:var(--theme-ui-colors-base10,#ffffff);-webkit-text-decoration:none;text-decoration:none;-webkit-transition:color 0.15s ease;transition:color 0.15s ease;}.css-1dn4en8:hover{color:var(--theme-ui-colors-base0D,#6699cc);}.css-1dn4en8::after{content:"";display:block;width:100%;height:2px;background-color:var(--theme-ui-colors-base0D,#6699cc);opacity:0;-webkit-transform:translate3D(0,10px,0);-ms-transform:translate3D(0,10px,0);transform:translate3D(0,10px,0);-webkit-transition:opacity 0.3s,-webkit-transform 0.3s;-webkit-transition:opacity 0.3s,transform 0.3s;transition:opacity 0.3s,transform 0.3s;}.css-1dn4en8:hover::after{opacity:1;-webkit-transform:translate3D(0,0,0);-ms-transform:translate3D(0,0,0);transform:translate3D(0,0,0);}</style><a href="https://github.com/luismayta" class="css-1dn4en8">@luismayta | DevOps Engineer</a></li></ul></div><div class="css-gelidi"><h3 class="css-11kbfa7">No Tenemos Tiempo</h3><style data-emotion-css="1unsocx">.css-1unsocx{width:100%;height:100%;background-image:url(/slides-iac-challenger/static/process-thinking-413c3d6221f40144b2a17842c65f8ad9.jpg);background-size:cover;background-position:center;background-repeat:no-repeat;}</style><div style="visibility:visible" class="css-1unsocx"></div></div><div class="css-gelidi"><h2 class="css-11kbfa7">Agenda</h2><ul class="css-16wqnxf"><li class="css-1wvf2dc">What is Infrastructure as Code?</li><li class="css-1wvf2dc">Goals</li><li class="css-1wvf2dc">Tools</li><li class="css-1wvf2dc">Initial Challenges</li><li class="css-1wvf2dc">Scaling Challenges</li></ul></div><div class="css-gelidi"><h4 class="css-11kbfa7">What Is Infrastructure as Code?</h4><style data-emotion-css="1xi7gmr">.css-1xi7gmr{margin:10px 0;text-align:center;}</style><p style="visibility:visible" class="css-1xi7gmr">Managed and provisioned through code.</p></div><div class="css-gelidi"><h2 class="css-11kbfa7">Goals</h2><div style="width:100vw;max-width:100%;height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center" class="cs-layout"><div style="overflow:auto;height:100%;width:100%"><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><style data-emotion-css="nx6kmc">.css-nx6kmc{color:var(--theme-ui-colors-base10,#ffffff);background-color:var(--theme-ui-colors-base00,#1b2b34);font-family:"Victor Mono";}.css-nx6kmc .token-comment,.css-nx6kmc .token-prolog,.css-nx6kmc .token-cdata{color:var(--theme-ui-colors-base03,#65737e);}.css-nx6kmc .token-entity,.css-nx6kmc .token-string{color:var(--theme-ui-colors-base04,#a7adba);}.css-nx6kmc .token-punctuation{color:var(--theme-ui-colors-base05,#c0c5ce);}.css-nx6kmc .token-variable,.css-nx6kmc .token-tag,.css-nx6kmc .token-operator,.css-nx6kmc .token-deleted,.css-nx6kmc .token-{color:var(--theme-ui-colors-base08,#ec5f67);}.css-nx6kmc .token-property,.css-nx6kmc .token-number,.css-nx6kmc .token-boolean,.css-nx6kmc .token-constant,.css-nx6kmc .token-url{color:var(--theme-ui-colors-base0A,#fac863);}.css-nx6kmc .token-maybe-class-name{color:var(--theme-ui-colors-base0C,#62b3b2);font-style:italic;}.css-nx6kmc .token-class-name,.css-nx6kmc .token-bold{color:var(--theme-ui-colors-base0A,#fac863);}.css-nx6kmc .token-string,.css-nx6kmc .token-symbol,.css-nx6kmc .token-attr-value,.css-nx6kmc .token-inserted,.css-nx6kmc .token-atrule{color:var(--theme-ui-colors-base0B,#99c794);}.css-nx6kmc .token-regex,.css-nx6kmc .token-important{color:var(--theme-ui-colors-base0C,#62b3b2);}.css-nx6kmc .token-function,.css-nx6kmc .token-attr-name{color:var(--theme-ui-colors-base0D,#6699cc);}.css-nx6kmc .token-keyword,.css-nx6kmc .token-selector,.css-nx6kmc .token-italic,.css-nx6kmc .token-char,.css-nx6kmc .token-builtin{color:var(--theme-ui-colors-base0E,#c594c5);}.css-nx6kmc .token-doctype{color:var(--theme-ui-colors-base0F,#ab7967);}.css-nx6kmc .token-important,.css-nx6kmc .token-bold{font-weight:500;}.css-nx6kmc .token-italic{font-style:italic;}.css-nx6kmc .token-line-number{opacity:0.65;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}</style><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><style data-emotion-css="710r11">.css-710r11{color:var(--theme-ui-colors-base10,#ffffff);background-color:var(--theme-ui-colors-base00,#1b2b34);font-family:"Victor Mono";}</style><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-0"><span class="token-list">-</span><span class="token-plain"> </span><span class="token-punctuation">**</span><span class="token-content">Unify</span><span class="token-punctuation">**</span><span class="token-plain"> the view of resources</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-1"><span class="token-list">-</span><span class="token-plain"> </span><span class="token-punctuation">**</span><span class="token-content">Support</span><span class="token-punctuation">**</span><span class="token-plain"> the modern data center (IaaS, PaaS, SaaS)</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-2"><span class="token-list">-</span><span class="token-plain"> Expose a Way for individuals and teams to </span><span class="token-punctuation">**</span><span class="token-content">safely and predictably change</span><span class="token-punctuation">**</span><span class="token-plain"> infrastructure</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-3"><span class="token-list">-</span><span class="token-plain"> Provide a workflow that is </span><span class="token-punctuation">**</span><span class="token-content">technology agnostic</span><span class="token-punctuation">**</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-4"><span class="token-list">-</span><span class="token-plain"> Manage anything with an </span><span class="token-punctuation">**</span><span class="token-content">API</span><span class="token-punctuation">**</span></div></div><div></div></code></pre></div></div></div></div></div><div class="css-gelidi"><h2 class="css-11kbfa7">Tools</h2></div><div class="css-gelidi"><ul class="css-16wqnxf"><li class="css-1wvf2dc"><a href="https://aws.amazon.com/cloudformation" class="css-1dn4en8">Aws Cloudformation</a></li></ul></div><div class="css-gelidi"><h3 class="css-11kbfa7">Example</h3></div><div class="css-gelidi"><div style="width:100vw;max-width:100%;height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center" class="cs-layout"><div style="overflow:auto;height:100%;width:100%"><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-0"><span class="token-line-number"> 1 </span><span class="token-plain">​</span></div></div><div style="overflow:hidden;opacity:1"><div style="display:inline-block" class="cs-line cs-line-1"><span class="token-line-number"> 2 </span><span class="token-key">EC2Instance</span><span class="token-punctuation">:</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-2"><span class="token-line-number"> 3 </span><span class="token-plain">  </span><span class="token-key">Type</span><span class="token-punctuation">:</span><span class="token-plain"> AWS</span><span class="token-punctuation">:</span><span class="token-punctuation">:</span><span class="token-plain">EC2</span><span class="token-punctuation">:</span><span class="token-punctuation">:</span><span class="token-plain">Instance</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-3"><span class="token-line-number"> 4 </span><span class="token-plain">  </span><span class="token-key">Properties</span><span class="token-punctuation">:</span></div></div><div style="overflow:hidden;opacity:1"><div style="display:inline-block" class="cs-line cs-line-4"><span class="token-line-number"> 5 </span><span class="token-plain">      </span><span class="token-key">ImageId</span><span class="token-punctuation">:</span><span class="token-plain"> </span><span class="token-tag">!FindInMap</span><span class="token-plain"> </span><span class="token-punctuation">[</span><span class="token-plain"> AWSRegionArch2AMI</span><span class="token-punctuation">,</span><span class="token-plain"> </span><span class="token-tag">!Ref</span><span class="token-plain"> </span><span class="token-string">&#x27;AWS::Region&#x27;</span><span class="token-plain"> </span><span class="token-punctuation">,</span><span class="token-plain"> </span><span class="token-tag">!FindInMap</span><span class="token-plain"> </span><span class="token-punctuation">[</span><span class="token-plain"> AWSInstanceType2Arch</span><span class="token-punctuation">,</span><span class="token-plain"> </span><span class="token-tag">!Ref</span><span class="token-plain"> InstanceType</span><span class="token-punctuation">,</span><span class="token-plain"> Arch </span><span class="token-punctuation">]</span><span class="token-plain"> </span><span class="token-punctuation">]</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-5"><span class="token-line-number"> 6 </span><span class="token-plain">      </span><span class="token-key">KeyName</span><span class="token-punctuation">:</span><span class="token-plain"> </span><span class="token-tag">!Ref</span><span class="token-plain"> KeyName</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-6"><span class="token-line-number"> 7 </span><span class="token-plain">      </span><span class="token-key">InstanceType</span><span class="token-punctuation">:</span><span class="token-plain"> </span><span class="token-tag">!Ref</span><span class="token-plain"> InstanceType</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-7"><span class="token-line-number"> 8 </span><span class="token-plain">      </span><span class="token-key">SecurityGroups</span><span class="token-punctuation">:</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-8"><span class="token-line-number"> 9 </span><span class="token-plain">      </span><span class="token-punctuation">-</span><span class="token-plain"> </span><span class="token-tag">!Ref</span><span class="token-plain"> Ec2SecurityGroup</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-9"><span class="token-line-number">10 </span><span class="token-plain">      </span><span class="token-key">BlockDeviceMappings</span><span class="token-punctuation">:</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-10"><span class="token-line-number">11 </span><span class="token-plain">      </span><span class="token-punctuation">-</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-11"><span class="token-line-number">12 </span><span class="token-plain">          </span><span class="token-key">DeviceName</span><span class="token-punctuation">:</span><span class="token-plain"> /dev/sda1</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-12"><span class="token-line-number">13 </span><span class="token-plain">          </span><span class="token-key">Ebs</span><span class="token-punctuation">:</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-13"><span class="token-line-number">14 </span><span class="token-plain">          </span><span class="token-key">VolumeSize</span><span class="token-punctuation">:</span><span class="token-plain"> </span><span class="token-number">50</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-14"><span class="token-line-number">15 </span><span class="token-plain">      </span><span class="token-punctuation">-</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-15"><span class="token-line-number">16 </span><span class="token-plain">          </span><span class="token-key">DeviceName</span><span class="token-punctuation">:</span><span class="token-plain"> /dev/sdm</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-16"><span class="token-line-number">17 </span><span class="token-plain">          </span><span class="token-key">Ebs</span><span class="token-punctuation">:</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-17"><span class="token-line-number">18 </span><span class="token-plain">          </span><span class="token-key">VolumeSize</span><span class="token-punctuation">:</span><span class="token-plain"> </span><span class="token-number">100</span></div></div><div></div></code></pre><style data-emotion-css="qb9c5m">.css-qb9c5m{position:absolute;top:0;width:100%;margin:0;padding:1em 0;text-align:center;background-color:var(--theme-ui-colors-base00,#1b2b34);color:var(--theme-ui-colors-base10,#ffffff);}</style><h4 class="cs-title css-qb9c5m" style="opacity:0"><span style="opacity:1"></span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number">18 </span><div style="display:inline-block" class="cs-line cs-line-1"><span class="token-key">EC2Instance</span><span class="token-punctuation">:</span></div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number"> 1 </span><div style="display:inline-block" class="cs-line cs-line-4"><span class="token-plain">      </span><span class="token-key">ImageId</span><span class="token-punctuation">:</span><span class="token-plain"> </span><span class="token-tag">!FindInMap</span><span class="token-plain"> </span><span class="token-punctuation">[</span><span class="token-plain"> AWSRegionArch2AMI</span><span class="token-punctuation">,</span><span class="token-plain"> </span><span class="token-tag">!Ref</span><span class="token-plain"> </span><span class="token-string">&#x27;AWS::Region&#x27;</span><span class="token-plain"> </span><span class="token-punctuation">,</span><span class="token-plain"> </span><span class="token-tag">!FindInMap</span><span class="token-plain"> </span><span class="token-punctuation">[</span><span class="token-plain"> AWSInstanceType2Arch</span><span class="token-punctuation">,</span><span class="token-plain"> </span><span class="token-tag">!Ref</span><span class="token-plain"> InstanceType</span><span class="token-punctuation">,</span><span class="token-plain"> Arch </span><span class="token-punctuation">]</span><span class="token-plain"> </span><span class="token-punctuation">]</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m"><span style="opacity:1">Especify type of resource</span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number">18 </span><div style="display:inline-block" class="cs-line cs-line-1"><span class="token-key">EC2Instance</span><span class="token-punctuation">:</span></div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number"> 1 </span><div style="display:inline-block" class="cs-line cs-line-4"><span class="token-plain">      </span><span class="token-key">ImageId</span><span class="token-punctuation">:</span><span class="token-plain"> </span><span class="token-tag">!FindInMap</span><span class="token-plain"> </span><span class="token-punctuation">[</span><span class="token-plain"> AWSRegionArch2AMI</span><span class="token-punctuation">,</span><span class="token-plain"> </span><span class="token-tag">!Ref</span><span class="token-plain"> </span><span class="token-string">&#x27;AWS::Region&#x27;</span><span class="token-plain"> </span><span class="token-punctuation">,</span><span class="token-plain"> </span><span class="token-tag">!FindInMap</span><span class="token-plain"> </span><span class="token-punctuation">[</span><span class="token-plain"> AWSInstanceType2Arch</span><span class="token-punctuation">,</span><span class="token-plain"> </span><span class="token-tag">!Ref</span><span class="token-plain"> InstanceType</span><span class="token-punctuation">,</span><span class="token-plain"> Arch </span><span class="token-punctuation">]</span><span class="token-plain"> </span><span class="token-punctuation">]</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m"><span style="opacity:1">Configuration ec2 instance</span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;opacity:0.1"><div style="display:inline-block" class="cs-line cs-line-1"><span class="token-line-number">18 </span><span class="token-key">EC2Instance</span><span class="token-punctuation">:</span></div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number"> 1 </span><div style="display:inline-block" class="cs-line cs-line-4"><span class="token-plain">      </span><span class="token-key">ImageId</span><span class="token-punctuation">:</span><span class="token-plain"> </span><span class="token-tag">!FindInMap</span><span class="token-plain"> </span><span class="token-punctuation">[</span><span class="token-plain"> AWSRegionArch2AMI</span><span class="token-punctuation">,</span><span class="token-plain"> </span><span class="token-tag">!Ref</span><span class="token-plain"> </span><span class="token-string">&#x27;AWS::Region&#x27;</span><span class="token-plain"> </span><span class="token-punctuation">,</span><span class="token-plain"> </span><span class="token-tag">!FindInMap</span><span class="token-plain"> </span><span class="token-punctuation">[</span><span class="token-plain"> AWSInstanceType2Arch</span><span class="token-punctuation">,</span><span class="token-plain"> </span><span class="token-tag">!Ref</span><span class="token-plain"> InstanceType</span><span class="token-punctuation">,</span><span class="token-plain"> Arch </span><span class="token-punctuation">]</span><span class="token-plain"> </span><span class="token-punctuation">]</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m"><span style="opacity:1">Added security Group</span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-1"><span class="token-line-number">18 </span><span class="token-key">EC2Instance</span><span class="token-punctuation">:</span></div></div><div style="overflow:hidden;height:100px;opacity:0.1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-4"><span class="token-line-number"> 1 </span><span class="token-plain">      </span><span class="token-key">ImageId</span><span class="token-punctuation">:</span><span class="token-plain"> </span><span class="token-tag">!FindInMap</span><span class="token-plain"> </span><span class="token-punctuation">[</span><span class="token-plain"> AWSRegionArch2AMI</span><span class="token-punctuation">,</span><span class="token-plain"> </span><span class="token-tag">!Ref</span><span class="token-plain"> </span><span class="token-string">&#x27;AWS::Region&#x27;</span><span class="token-plain"> </span><span class="token-punctuation">,</span><span class="token-plain"> </span><span class="token-tag">!FindInMap</span><span class="token-plain"> </span><span class="token-punctuation">[</span><span class="token-plain"> AWSInstanceType2Arch</span><span class="token-punctuation">,</span><span class="token-plain"> </span><span class="token-tag">!Ref</span><span class="token-plain"> InstanceType</span><span class="token-punctuation">,</span><span class="token-plain"> Arch </span><span class="token-punctuation">]</span><span class="token-plain"> </span><span class="token-punctuation">]</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m" style="opacity:1"><span style="opacity:1">Configuration Block Device</span></h4></div></div></div></div></div><div class="css-gelidi"><ul class="css-16wqnxf"><li class="css-1wvf2dc"><a href="https://www.pulumi.com" class="css-1dn4en8">Pulumi</a></li></ul></div><div class="css-gelidi"><h3 class="css-11kbfa7">Example</h3></div><div class="css-gelidi"><div style="width:100vw;max-width:100%;height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center" class="cs-layout"><div style="overflow:auto;height:100%;width:100%"><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-0"><span class="token-line-number"> 1 </span><span class="token-plain">​</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-1"><span class="token-line-number"> 2 </span><span class="token-keyword">package</span><span class="token-plain"> main</span></div></div><div style="overflow:hidden;opacity:1"><div style="display:inline-block" class="cs-line cs-line-2"><span class="token-line-number"> 3 </span><span class="token-plain">​</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-3"><span class="token-line-number"> 4 </span><span class="token-keyword">import</span><span class="token-plain"> </span><span class="token-punctuation">(</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-4"><span class="token-line-number"> 5 </span><span class="token-plain">    </span><span class="token-string">&quot;github.com/pulumi/pulumi-aws/sdk/v4/go/aws/ec2&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-5"><span class="token-line-number"> 6 </span><span class="token-plain">    </span><span class="token-string">&quot;github.com/pulumi/pulumi/sdk/v3/go/pulumi&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-6"><span class="token-line-number"> 7 </span><span class="token-punctuation">)</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-7"><span class="token-line-number"> 8 </span><span class="token-plain">​</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-8"><span class="token-line-number"> 9 </span><span class="token-keyword">func</span><span class="token-plain"> </span><span class="token-function">main</span><span class="token-punctuation">(</span><span class="token-punctuation">)</span><span class="token-plain"> </span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-9"><span class="token-line-number">10 </span><span class="token-plain">    pulumi</span><span class="token-punctuation">.</span><span class="token-function">Run</span><span class="token-punctuation">(</span><span class="token-keyword">func</span><span class="token-punctuation">(</span><span class="token-plain">ctx </span><span class="token-operator">*</span><span class="token-plain">pulumi</span><span class="token-punctuation">.</span><span class="token-plain">Context</span><span class="token-punctuation">)</span><span class="token-plain"> </span><span class="token-builtin">error</span><span class="token-plain"> </span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-10"><span class="token-line-number">11 </span><span class="token-plain">        </span><span class="token-comment">// Create a new security group for port 80.</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-11"><span class="token-line-number">12 </span><span class="token-plain">        group</span><span class="token-punctuation">,</span><span class="token-plain"> err </span><span class="token-operator">:=</span><span class="token-plain"> ec2</span><span class="token-punctuation">.</span><span class="token-function">NewSecurityGroup</span><span class="token-punctuation">(</span><span class="token-plain">ctx</span><span class="token-punctuation">,</span><span class="token-plain"> </span><span class="token-string">&quot;web-secgrp&quot;</span><span class="token-punctuation">,</span><span class="token-plain"> </span><span class="token-operator">&amp;</span><span class="token-plain">ec2</span><span class="token-punctuation">.</span><span class="token-plain">SecurityGroupArgs</span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-12"><span class="token-line-number">13 </span><span class="token-plain">            Ingress</span><span class="token-punctuation">:</span><span class="token-plain"> ec2</span><span class="token-punctuation">.</span><span class="token-plain">SecurityGroupIngressArray</span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-13"><span class="token-line-number">14 </span><span class="token-plain">                ec2</span><span class="token-punctuation">.</span><span class="token-plain">SecurityGroupIngressArgs</span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-14"><span class="token-line-number">15 </span><span class="token-plain">                    Protocol</span><span class="token-punctuation">:</span><span class="token-plain">   pulumi</span><span class="token-punctuation">.</span><span class="token-function">String</span><span class="token-punctuation">(</span><span class="token-string">&quot;tcp&quot;</span><span class="token-punctuation">)</span><span class="token-punctuation">,</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-15"><span class="token-line-number">16 </span><span class="token-plain">                    FromPort</span><span class="token-punctuation">:</span><span class="token-plain">   pulumi</span><span class="token-punctuation">.</span><span class="token-function">Int</span><span class="token-punctuation">(</span><span class="token-number">80</span><span class="token-punctuation">)</span><span class="token-punctuation">,</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-16"><span class="token-line-number">17 </span><span class="token-plain">                    ToPort</span><span class="token-punctuation">:</span><span class="token-plain">     pulumi</span><span class="token-punctuation">.</span><span class="token-function">Int</span><span class="token-punctuation">(</span><span class="token-number">80</span><span class="token-punctuation">)</span><span class="token-punctuation">,</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-17"><span class="token-line-number">18 </span><span class="token-plain">                    CidrBlocks</span><span class="token-punctuation">:</span><span class="token-plain"> pulumi</span><span class="token-punctuation">.</span><span class="token-plain">StringArray</span><span class="token-punctuation">{</span><span class="token-plain">pulumi</span><span class="token-punctuation">.</span><span class="token-function">String</span><span class="token-punctuation">(</span><span class="token-string">&quot;0.0.0.0/0&quot;</span><span class="token-punctuation">)</span><span class="token-punctuation">}</span><span class="token-punctuation">,</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-18"><span class="token-line-number">19 </span><span class="token-plain">                </span><span class="token-punctuation">}</span><span class="token-punctuation">,</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-19"><span class="token-line-number">20 </span><span class="token-plain">            </span><span class="token-punctuation">}</span><span class="token-punctuation">,</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-20"><span class="token-line-number">21 </span><span class="token-plain">        </span><span class="token-punctuation">}</span><span class="token-punctuation">)</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-21"><span class="token-line-number">22 </span><span class="token-plain">        </span><span class="token-keyword">if</span><span class="token-plain"> err </span><span class="token-operator">!=</span><span class="token-plain"> </span><span class="token-boolean">nil</span><span class="token-plain"> </span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-22"><span class="token-line-number">23 </span><span class="token-plain">            </span><span class="token-keyword">return</span><span class="token-plain"> err</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-23"><span class="token-line-number">24 </span><span class="token-plain">        </span><span class="token-punctuation">}</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-24"><span class="token-line-number">25 </span><span class="token-plain">​</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-25"><span class="token-line-number">26 </span><span class="token-plain">        </span><span class="token-comment">// Get the ID for the 20.04 Ubuntu Linux AMI.</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-26"><span class="token-line-number">27 </span><span class="token-plain">        mostRecent </span><span class="token-operator">:=</span><span class="token-plain"> </span><span class="token-boolean">true</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-27"><span class="token-line-number">28 </span><span class="token-plain">        ami</span><span class="token-punctuation">,</span><span class="token-plain"> err </span><span class="token-operator">:=</span><span class="token-plain"> ec2</span><span class="token-punctuation">.</span><span class="token-function">LookupAmi</span><span class="token-punctuation">(</span><span class="token-plain">ctx</span><span class="token-punctuation">,</span><span class="token-plain"> </span><span class="token-operator">&amp;</span><span class="token-plain">ec2</span><span class="token-punctuation">.</span><span class="token-plain">LookupAmiArgs</span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-28"><span class="token-line-number">29 </span><span class="token-plain">            Filters</span><span class="token-punctuation">:</span><span class="token-plain"> </span><span class="token-punctuation">[</span><span class="token-punctuation">]</span><span class="token-plain">ec2</span><span class="token-punctuation">.</span><span class="token-plain">GetAmiFilter</span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-29"><span class="token-line-number">30 </span><span class="token-plain">                </span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-30"><span class="token-line-number">31 </span><span class="token-plain">                    Name</span><span class="token-punctuation">:</span><span class="token-plain">   </span><span class="token-string">&quot;name&quot;</span><span class="token-punctuation">,</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-31"><span class="token-line-number">32 </span><span class="token-plain">                    Values</span><span class="token-punctuation">:</span><span class="token-plain"> </span><span class="token-punctuation">[</span><span class="token-punctuation">]</span><span class="token-builtin">string</span><span class="token-punctuation">{</span><span class="token-string">&quot;ubuntu/images/hvm-ssd/ubuntu-focal-20.04-amd64-server-*&quot;</span><span class="token-punctuation">}</span><span class="token-punctuation">,</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-32"><span class="token-line-number">33 </span><span class="token-plain">                </span><span class="token-punctuation">}</span><span class="token-punctuation">,</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-33"><span class="token-line-number">34 </span><span class="token-plain">            </span><span class="token-punctuation">}</span><span class="token-punctuation">,</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-34"><span class="token-line-number">35 </span><span class="token-plain">            Owners</span><span class="token-punctuation">:</span><span class="token-plain">     </span><span class="token-punctuation">[</span><span class="token-punctuation">]</span><span class="token-builtin">string</span><span class="token-punctuation">{</span><span class="token-string">&quot;099720109477&quot;</span><span class="token-punctuation">}</span><span class="token-punctuation">,</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-35"><span class="token-line-number">36 </span><span class="token-plain">            MostRecent</span><span class="token-punctuation">:</span><span class="token-plain"> </span><span class="token-operator">&amp;</span><span class="token-plain">mostRecent</span><span class="token-punctuation">,</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-36"><span class="token-line-number">37 </span><span class="token-plain">        </span><span class="token-punctuation">}</span><span class="token-punctuation">)</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-37"><span class="token-line-number">38 </span><span class="token-plain">        </span><span class="token-keyword">if</span><span class="token-plain"> err </span><span class="token-operator">!=</span><span class="token-plain"> </span><span class="token-boolean">nil</span><span class="token-plain"> </span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-38"><span class="token-line-number">39 </span><span class="token-plain">            </span><span class="token-keyword">return</span><span class="token-plain"> err</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-39"><span class="token-line-number">40 </span><span class="token-plain">        </span><span class="token-punctuation">}</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-40"><span class="token-line-number">41 </span><span class="token-plain">​</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-41"><span class="token-line-number">42 </span><span class="token-plain">        </span><span class="token-comment">// Create a simple instance using the startup script for the instance.</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-42"><span class="token-line-number">43 </span><span class="token-plain">        srv</span><span class="token-punctuation">,</span><span class="token-plain"> err </span><span class="token-operator">:=</span><span class="token-plain"> ec2</span><span class="token-punctuation">.</span><span class="token-function">NewInstance</span><span class="token-punctuation">(</span><span class="token-plain">ctx</span><span class="token-punctuation">,</span><span class="token-plain"> </span><span class="token-string">&quot;instance&quot;</span><span class="token-punctuation">,</span><span class="token-plain"> </span><span class="token-operator">&amp;</span><span class="token-plain">ec2</span><span class="token-punctuation">.</span><span class="token-plain">InstanceArgs</span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-43"><span class="token-line-number">44 </span><span class="token-plain">            Tags</span><span class="token-punctuation">:</span><span class="token-plain">                pulumi</span><span class="token-punctuation">.</span><span class="token-plain">StringMap</span><span class="token-punctuation">{</span><span class="token-string">&quot;Name&quot;</span><span class="token-punctuation">:</span><span class="token-plain"> pulumi</span><span class="token-punctuation">.</span><span class="token-function">String</span><span class="token-punctuation">(</span><span class="token-string">&quot;instance-server&quot;</span><span class="token-punctuation">)</span><span class="token-punctuation">}</span><span class="token-punctuation">,</span></div></div><div style="overflow:hidden;opacity:1"><div style="display:inline-block" class="cs-line cs-line-44"><span class="token-line-number">45 </span><span class="token-plain">            InstanceType</span><span class="token-punctuation">:</span><span class="token-plain">        pulumi</span><span class="token-punctuation">.</span><span class="token-function">String</span><span class="token-punctuation">(</span><span class="token-string">&quot;t2.micro&quot;</span><span class="token-punctuation">)</span><span class="token-punctuation">,</span><span class="token-plain"> </span><span class="token-comment">// t2.micro is available in the AWS free tier.</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-45"><span class="token-line-number">46 </span><span class="token-plain">            VpcSecurityGroupIds</span><span class="token-punctuation">:</span><span class="token-plain"> pulumi</span><span class="token-punctuation">.</span><span class="token-plain">StringArray</span><span class="token-punctuation">{</span><span class="token-plain">group</span><span class="token-punctuation">.</span><span class="token-function">ID</span><span class="token-punctuation">(</span><span class="token-punctuation">)</span><span class="token-punctuation">}</span><span class="token-punctuation">,</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-46"><span class="token-line-number">47 </span><span class="token-plain">            Ami</span><span class="token-punctuation">:</span><span class="token-plain">                 pulumi</span><span class="token-punctuation">.</span><span class="token-function">String</span><span class="token-punctuation">(</span><span class="token-plain">ami</span><span class="token-punctuation">.</span><span class="token-plain">Id</span><span class="token-punctuation">)</span><span class="token-punctuation">,</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-47"><span class="token-line-number">48 </span><span class="token-plain">            UserData</span><span class="token-punctuation">:</span><span class="token-plain"> pulumi</span><span class="token-punctuation">.</span><span class="token-function">String</span><span class="token-punctuation">(</span><span class="token-string">`#!/bin/bash</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-48"><span class="token-line-number">49 </span><span class="token-string">echo &quot;Hello, World!&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-49"><span class="token-line-number">50 </span><span class="token-string">`</span><span class="token-punctuation">)</span><span class="token-punctuation">,</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-50"><span class="token-line-number">51 </span><span class="token-plain">        </span><span class="token-punctuation">}</span><span class="token-punctuation">)</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-51"><span class="token-line-number">52 </span><span class="token-plain">​</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-52"><span class="token-line-number">53 </span><span class="token-plain">        </span><span class="token-comment">// Export the resulting server&#x27;s IP address and DNS name.</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-53"><span class="token-line-number">54 </span><span class="token-plain">        ctx</span><span class="token-punctuation">.</span><span class="token-function">Export</span><span class="token-punctuation">(</span><span class="token-string">&quot;publicIp&quot;</span><span class="token-punctuation">,</span><span class="token-plain"> srv</span><span class="token-punctuation">.</span><span class="token-plain">PublicIp</span><span class="token-punctuation">)</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-54"><span class="token-line-number">55 </span><span class="token-plain">        ctx</span><span class="token-punctuation">.</span><span class="token-function">Export</span><span class="token-punctuation">(</span><span class="token-string">&quot;publicHostName&quot;</span><span class="token-punctuation">,</span><span class="token-plain"> srv</span><span class="token-punctuation">.</span><span class="token-plain">PublicDns</span><span class="token-punctuation">)</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-55"><span class="token-line-number">56 </span><span class="token-plain">        </span><span class="token-keyword">return</span><span class="token-plain"> </span><span class="token-boolean">nil</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-56"><span class="token-line-number">57 </span><span class="token-plain">    </span><span class="token-punctuation">}</span><span class="token-punctuation">)</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-57"><span class="token-line-number">58 </span><span class="token-punctuation">}</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m" style="opacity:0"><span style="opacity:1"></span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number">58 </span><div style="display:inline-block" class="cs-line cs-line-2"><span class="token-plain">​</span></div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number"> 1 </span><div style="display:inline-block" class="cs-line cs-line-44"><span class="token-plain">            InstanceType</span><span class="token-punctuation">:</span><span class="token-plain">        pulumi</span><span class="token-punctuation">.</span><span class="token-function">String</span><span class="token-punctuation">(</span><span class="token-string">&quot;t2.micro&quot;</span><span class="token-punctuation">)</span><span class="token-punctuation">,</span><span class="token-plain"> </span><span class="token-comment">// t2.micro is available in the AWS free tier.</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m"><span style="opacity:1">Import libraries</span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number">58 </span><div style="display:inline-block" class="cs-line cs-line-2"><span class="token-plain">​</span></div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number"> 1 </span><div style="display:inline-block" class="cs-line cs-line-44"><span class="token-plain">            InstanceType</span><span class="token-punctuation">:</span><span class="token-plain">        pulumi</span><span class="token-punctuation">.</span><span class="token-function">String</span><span class="token-punctuation">(</span><span class="token-string">&quot;t2.micro&quot;</span><span class="token-punctuation">)</span><span class="token-punctuation">,</span><span class="token-plain"> </span><span class="token-comment">// t2.micro is available in the AWS free tier.</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m"><span style="opacity:1">Make new security Group</span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number">58 </span><div style="display:inline-block" class="cs-line cs-line-2"><span class="token-plain">​</span></div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number"> 1 </span><div style="display:inline-block" class="cs-line cs-line-44"><span class="token-plain">            InstanceType</span><span class="token-punctuation">:</span><span class="token-plain">        pulumi</span><span class="token-punctuation">.</span><span class="token-function">String</span><span class="token-punctuation">(</span><span class="token-string">&quot;t2.micro&quot;</span><span class="token-punctuation">)</span><span class="token-punctuation">,</span><span class="token-plain"> </span><span class="token-comment">// t2.micro is available in the AWS free tier.</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m"><span style="opacity:1">Get Id AMI Ubuntu</span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;height:100px;opacity:0.1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-2"><span class="token-line-number">58 </span><span class="token-plain">​</span></div></div><div style="overflow:hidden;height:100px;opacity:0.1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-44"><span class="token-line-number"> 1 </span><span class="token-plain">            InstanceType</span><span class="token-punctuation">:</span><span class="token-plain">        pulumi</span><span class="token-punctuation">.</span><span class="token-function">String</span><span class="token-punctuation">(</span><span class="token-string">&quot;t2.micro&quot;</span><span class="token-punctuation">)</span><span class="token-punctuation">,</span><span class="token-plain"> </span><span class="token-comment">// t2.micro is available in the AWS free tier.</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m" style="opacity:1"><span style="opacity:1">Make new instance</span></h4></div></div></div></div></div><div class="css-gelidi"><ul class="css-16wqnxf"><li class="css-1wvf2dc"><a href="https://www.terraform.io" class="css-1dn4en8">Terraform</a></li></ul><p style="visibility:visible" class="css-1xi7gmr">Write, Plan, and Create Infrastructure as Code.</p></div><div class="css-gelidi"><h3 class="css-11kbfa7">Example</h3></div><div class="css-gelidi"><div style="width:100vw;max-width:100%;height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center" class="cs-layout"><div style="overflow:auto;height:100%;width:100%"><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-0"><span class="token-line-number"> 1 </span><span class="token-plain">​</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-1"><span class="token-line-number"> 2 </span><span class="token-keyword">resource </span><span class="token-type">&quot;aws_instance&quot;</span><span class="token-plain"> </span><span class="token-string">&quot;this&quot;</span><span class="token-plain"> </span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;opacity:1"><div style="display:inline-block" class="cs-line cs-line-2"><span class="token-line-number"> 3 </span><span class="token-plain">  </span><span class="token-property">ami</span><span class="token-plain">               </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-string">&quot;ami of linux&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-3"><span class="token-line-number"> 4 </span><span class="token-plain">  </span><span class="token-property">instance_type</span><span class="token-plain">     </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-string">&quot;t2.micro&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-4"><span class="token-line-number"> 5 </span><span class="token-plain">  </span><span class="token-property">key_name</span><span class="token-plain">          </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-string">&quot;aws key name&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-5"><span class="token-line-number"> 6 </span><span class="token-plain">  </span><span class="token-property">source_dest_check</span><span class="token-plain"> </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-boolean">true</span></div></div><div style="overflow:hidden;opacity:1"><div style="display:inline-block" class="cs-line cs-line-6"><span class="token-line-number"> 7 </span><span class="token-plain">​</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-7"><span class="token-line-number"> 8 </span><span class="token-plain">  </span><span class="token-keyword">root_block_device</span><span class="token-plain"> </span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-8"><span class="token-line-number"> 9 </span><span class="token-plain">    </span><span class="token-property">encrypted</span><span class="token-plain">             </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-boolean">true</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-9"><span class="token-line-number">10 </span><span class="token-plain">    </span><span class="token-property">volume_type</span><span class="token-plain">           </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-string">&quot;gp2&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-10"><span class="token-line-number">11 </span><span class="token-plain">    </span><span class="token-property">volume_size</span><span class="token-plain">           </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-string">&quot;16&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-11"><span class="token-line-number">12 </span><span class="token-plain">    </span><span class="token-property">delete_on_termination</span><span class="token-plain"> </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-boolean">true</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-12"><span class="token-line-number">13 </span><span class="token-plain">  </span><span class="token-punctuation">}</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-13"><span class="token-line-number">14 </span><span class="token-plain">  ...</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-14"><span class="token-line-number">15 </span><span class="token-plain">​</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-15"><span class="token-line-number">16 </span><span class="token-punctuation">}</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m" style="opacity:0"><span style="opacity:1"></span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number"> 1 </span><div style="display:inline-block" class="cs-line cs-line-2"><span class="token-plain">  </span><span class="token-property">ami</span><span class="token-plain">               </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-string">&quot;ami of linux&quot;</span></div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number">16 </span><div style="display:inline-block" class="cs-line cs-line-6"><span class="token-plain">​</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m"><span style="opacity:1">Configuration of instance</span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;height:100px;opacity:0.1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-2"><span class="token-line-number"> 1 </span><span class="token-plain">  </span><span class="token-property">ami</span><span class="token-plain">               </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-string">&quot;ami of linux&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:0.1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-6"><span class="token-line-number">16 </span><span class="token-plain">​</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m" style="opacity:1"><span style="opacity:1">Configuration root block device</span></h4></div></div></div></div></div><div class="css-gelidi"><h3 class="css-11kbfa7">Components Terraform</h3><style data-emotion-css="tj3t4r">.css-tj3t4r{width:100%;height:100%;background-image:url(/slides-iac-challenger/static/components-3a9fd64e0e03895ddfd9c966922fa980.png);background-size:cover;background-position:center;background-repeat:no-repeat;}</style><div style="background-size:auto" class="css-tj3t4r"></div></div><div class="css-gelidi"><h3 class="css-11kbfa7">How Terraform Works</h3><style data-emotion-css="b5dhwg">.css-b5dhwg{width:100%;height:100%;background-image:url(/slides-iac-challenger/static/how_terraform_works-6fb8d8559c5804887764120389122332.png);background-size:cover;background-position:center;background-repeat:no-repeat;}</style><div style="background-size:auto" class="css-b5dhwg"></div></div><div class="css-gelidi"><h3 class="css-11kbfa7">Terragrunt</h3><p style="visibility:visible" class="css-1xi7gmr">Terragrunt is a thin wrapper that provides extra tools for keeping your configurations DRY</p></div><div class="css-gelidi"><div style="width:100vw;max-width:100%;height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center" class="cs-layout"><div style="overflow:auto;height:100%;width:100%"><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-0"><span class="token-line-number"> 1 </span><span class="token-keyword">terraform</span><span class="token-plain"> </span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-1"><span class="token-line-number"> 2 </span><span class="token-plain">  extra_arguments </span><span class="token-string">&quot;retry_lock&quot;</span><span class="token-plain"> </span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-2"><span class="token-line-number"> 3 </span><span class="token-plain">    </span><span class="token-property">commands</span><span class="token-plain"> </span><span class="token-punctuation">=</span><span class="token-plain"> get_terraform_commands_that_need_locking()</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-3"><span class="token-line-number"> 4 </span><span class="token-plain">    </span><span class="token-property">arguments</span><span class="token-plain"> </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-punctuation">[</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-4"><span class="token-line-number"> 5 </span><span class="token-plain">      </span><span class="token-string">&quot;-lock-timeout=40m&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-5"><span class="token-line-number"> 6 </span><span class="token-plain">    </span><span class="token-punctuation">]</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-6"><span class="token-line-number"> 7 </span><span class="token-plain">  </span><span class="token-punctuation">}</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-7"><span class="token-line-number"> 8 </span><span class="token-plain">  extra_arguments </span><span class="token-string">&quot;parallelism&quot;</span><span class="token-plain"> </span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-8"><span class="token-line-number"> 9 </span><span class="token-plain">    </span><span class="token-property">commands</span><span class="token-plain"> </span><span class="token-punctuation">=</span><span class="token-plain"> get_terraform_commands_that_need_parallelism()</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-9"><span class="token-line-number">10 </span><span class="token-plain">    </span><span class="token-property">arguments</span><span class="token-plain"> </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-punctuation">[</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-10"><span class="token-line-number">11 </span><span class="token-plain">      </span><span class="token-string">&quot;-parallelism=15&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-11"><span class="token-line-number">12 </span><span class="token-plain">    </span><span class="token-punctuation">]</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-12"><span class="token-line-number">13 </span><span class="token-plain">  </span><span class="token-punctuation">}</span></div></div><div style="overflow:hidden;opacity:1"><div style="display:inline-block" class="cs-line cs-line-13"><span class="token-line-number">14 </span><span class="token-punctuation">}</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-14"><span class="token-line-number">15 </span><span class="token-plain">​</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-15"><span class="token-line-number">16 </span><span class="token-keyword">remote_state</span><span class="token-plain"> </span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-16"><span class="token-line-number">17 </span><span class="token-plain">  </span><span class="token-property">backend</span><span class="token-plain"> </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-string">&quot;s3&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-17"><span class="token-line-number">18 </span><span class="token-plain">  </span><span class="token-property">config</span><span class="token-plain"> </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-18"><span class="token-line-number">19 </span><span class="token-plain">    </span><span class="token-property">bucket</span><span class="token-plain">  </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-string">&quot;name of bucket&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-19"><span class="token-line-number">20 </span><span class="token-plain">    </span><span class="token-property">encrypt</span><span class="token-plain"> </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-boolean">true</span></div></div><div style="overflow:hidden"><span class="token-line-number">21 </span><div style="display:inline-block" class="cs-line cs-line-20"><span class="token-plain">    </span><span class="token-comment"># Configure Terragrunt to automatically store tfstate files in an S3 bucket</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-21"><span class="token-line-number">22 </span><span class="token-plain">    </span><span class="token-property">key</span><span class="token-plain">            </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-string">&quot;</span><span class="token-punctuation">$</span><span class="token-punctuation">{</span><span class="token-function">path_relative_to_include</span><span class="token-punctuation">(</span><span class="token-punctuation">)</span><span class="token-punctuation">}</span><span class="token-string">/terraform.tfstate&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-22"><span class="token-line-number">23 </span><span class="token-plain">    </span><span class="token-property">region</span><span class="token-plain">         </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-string">&quot;region of aws&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-23"><span class="token-line-number">24 </span><span class="token-plain">    </span><span class="token-property">dynamodb_table</span><span class="token-plain"> </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-string">&quot;table of dynamodb&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-24"><span class="token-line-number">25 </span><span class="token-plain">​</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-25"><span class="token-line-number">26 </span><span class="token-plain">    </span><span class="token-property">s3_bucket_tags</span><span class="token-plain"> </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-26"><span class="token-line-number">27 </span><span class="token-plain">      </span><span class="token-property">owner</span><span class="token-plain"> </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-string">&quot;owner tag&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-27"><span class="token-line-number">28 </span><span class="token-plain">      </span><span class="token-property">name</span><span class="token-plain">  </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-string">&quot;Terraform state storage&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-28"><span class="token-line-number">29 </span><span class="token-plain">    </span><span class="token-punctuation">}</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-29"><span class="token-line-number">30 </span><span class="token-plain">​</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-30"><span class="token-line-number">31 </span><span class="token-plain">    </span><span class="token-comment"># dynamodb_table_tags is an attribute, so an equals sign is REQUIRED</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-31"><span class="token-line-number">32 </span><span class="token-plain">    </span><span class="token-property">dynamodb_table_tags</span><span class="token-plain"> </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-32"><span class="token-line-number">33 </span><span class="token-plain">      </span><span class="token-property">owner</span><span class="token-plain"> </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-string">&quot;owner tag&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-33"><span class="token-line-number">34 </span><span class="token-plain">      </span><span class="token-property">name</span><span class="token-plain">  </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-string">&quot;Terraform lock table&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-34"><span class="token-line-number">35 </span><span class="token-plain">    </span><span class="token-punctuation">}</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-35"><span class="token-line-number">36 </span><span class="token-plain">  </span><span class="token-punctuation">}</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-36"><span class="token-line-number">37 </span><span class="token-punctuation">}</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m" style="opacity:0"><span style="opacity:1"></span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number">37 </span><div style="display:inline-block" class="cs-line cs-line-13"><span class="token-punctuation">}</span></div></div><div style="overflow:hidden;opacity:1"><div style="display:inline-block" class="cs-line cs-line-20"><span class="token-line-number"> 1 </span><span class="token-plain">    </span><span class="token-comment"># Configure Terragrunt to automatically store tfstate files in an S3 bucket</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m"><span style="opacity:1">Implement extra args to terraform.</span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number">37 </span><div style="display:inline-block" class="cs-line cs-line-13"><span class="token-punctuation">}</span></div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number"> 1 </span><div style="display:inline-block" class="cs-line cs-line-20"><span class="token-plain">    </span><span class="token-comment"># Configure Terragrunt to automatically store tfstate files in an S3 bucket</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m"><span style="opacity:1">Remote State</span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number">37 </span><div style="display:inline-block" class="cs-line cs-line-13"><span class="token-punctuation">}</span></div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number"> 1 </span><div style="display:inline-block" class="cs-line cs-line-20"><span class="token-plain">    </span><span class="token-comment"># Configure Terragrunt to automatically store tfstate files in an S3 bucket</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m"><span style="opacity:1">Configuration bucket s3</span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number">37 </span><div style="display:inline-block" class="cs-line cs-line-13"><span class="token-punctuation">}</span></div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number"> 1 </span><div style="display:inline-block" class="cs-line cs-line-20"><span class="token-plain">    </span><span class="token-comment"># Configure Terragrunt to automatically store tfstate files in an S3 bucket</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m"><span style="opacity:1">Configuration Tags S3</span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number">37 </span><div style="display:inline-block" class="cs-line cs-line-13"><span class="token-punctuation">}</span></div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number"> 1 </span><div style="display:inline-block" class="cs-line cs-line-20"><span class="token-plain">    </span><span class="token-comment"># Configure Terragrunt to automatically store tfstate files in an S3 bucket</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m"><span style="opacity:1">Configuration DynamoDB Table</span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;height:100px;opacity:0.1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-13"><span class="token-line-number">37 </span><span class="token-punctuation">}</span></div></div><div style="overflow:hidden;height:100px;opacity:0.1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-20"><span class="token-line-number"> 1 </span><span class="token-plain">    </span><span class="token-comment"># Configure Terragrunt to automatically store tfstate files in an S3 bucket</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m" style="opacity:1"><span style="opacity:1">Configuration Tags DynamoDB</span></h4></div></div></div></div></div><div class="css-gelidi"><h3 class="css-11kbfa7">How Terragrunt Works</h3><style data-emotion-css="du6hez">.css-du6hez{width:100%;height:100%;background-image:url(/slides-iac-challenger/static/how_terragrunt_works-26f181eeebfd89174a9f507f5edd25f8.png);background-size:cover;background-position:center;background-repeat:no-repeat;}</style><div style="background-size:auto" class="css-du6hez"></div></div><div class="css-gelidi"><h2 class="css-11kbfa7">Initial Challenges</h2></div><div class="css-gelidi"><h3 class="css-11kbfa7">Need to learn to Code</h3><p style="visibility:visible" class="css-1xi7gmr">HCL is the HashiCorp configuration language.</p></div><div class="css-gelidi"><div style="width:100vw;max-width:100%;height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center" class="cs-layout"><div style="overflow:auto;height:100%;width:100%"><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-0"><span class="token-line-number">1 </span><span class="token-keyword">resource </span><span class="token-type">&quot;aws_instance&quot;</span><span class="token-plain"> </span><span class="token-string">&quot;this&quot;</span><span class="token-plain"> </span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;opacity:1"><div style="display:inline-block" class="cs-line cs-line-1"><span class="token-line-number">2 </span><span class="token-plain">  </span><span class="token-property">ami</span><span class="token-plain">               </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-string">&quot;ami of linux&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-2"><span class="token-line-number">3 </span><span class="token-plain">  </span><span class="token-property">instance_type</span><span class="token-plain">     </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-string">&quot;t2.micro&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-3"><span class="token-line-number">4 </span><span class="token-plain">  </span><span class="token-property">key_name</span><span class="token-plain">          </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-string">&quot;aws key name&quot;</span></div></div><div style="overflow:hidden;opacity:1"><div style="display:inline-block" class="cs-line cs-line-4"><span class="token-line-number">5 </span><span class="token-plain">​</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-5"><span class="token-line-number">6 </span><span class="token-plain">  </span><span class="token-property">vpc_security_group_ids</span><span class="token-plain"> </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-punctuation">[</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-6"><span class="token-line-number">7 </span><span class="token-plain">    aws_security_group.this.id</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-7"><span class="token-line-number">8 </span><span class="token-plain">  </span><span class="token-punctuation">]</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-8"><span class="token-line-number">9 </span><span class="token-punctuation">}</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m" style="opacity:0"><span style="opacity:1"></span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;height:100px;opacity:0.1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-1"><span class="token-line-number">1 </span><span class="token-plain">  </span><span class="token-property">ami</span><span class="token-plain">               </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-string">&quot;ami of linux&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:0.1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-4"><span class="token-line-number">9 </span><span class="token-plain">​</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m" style="opacity:1"><span style="opacity:1">Configuration resource</span></h4></div></div></div></div></div><div class="css-gelidi"><h3 class="css-11kbfa7">Can&#x27;t automate a resource</h3><ul style="visibility:visible" class="css-16wqnxf"><li class="css-1wvf2dc"><a href="https://registry.terraform.io/browse/providers" class="css-1dn4en8">Providers</a></li></ul></div><div class="css-gelidi"><div style="width:100vw;max-width:100%;height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center" class="cs-layout"><div style="overflow:auto;height:100%;width:100%"><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-0"><span class="token-line-number"> 1 </span><span class="token-keyword">terraform</span><span class="token-plain"> </span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-1"><span class="token-line-number"> 2 </span><span class="token-plain">  </span><span class="token-property">required_version</span><span class="token-plain"> </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-string">&quot;&gt;= 0.13&quot;</span></div></div><div style="overflow:hidden;opacity:1"><div style="display:inline-block" class="cs-line cs-line-2"><span class="token-line-number"> 3 </span><span class="token-plain">​</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-3"><span class="token-line-number"> 4 </span><span class="token-plain">  </span><span class="token-keyword">required_providers</span><span class="token-plain"> </span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-4"><span class="token-line-number"> 5 </span><span class="token-plain">    </span><span class="token-property">gitlab</span><span class="token-plain"> </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;opacity:1"><div style="display:inline-block" class="cs-line cs-line-5"><span class="token-line-number"> 6 </span><span class="token-plain">      </span><span class="token-property">source</span><span class="token-plain">  </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-string">&quot;gitlabhq/gitlab&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-6"><span class="token-line-number"> 7 </span><span class="token-plain">      </span><span class="token-property">version</span><span class="token-plain"> </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-string">&quot;&gt;=3.5.0&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-7"><span class="token-line-number"> 8 </span><span class="token-plain">    </span><span class="token-punctuation">}</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-8"><span class="token-line-number"> 9 </span><span class="token-plain">  </span><span class="token-punctuation">}</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-9"><span class="token-line-number">10 </span><span class="token-punctuation">}</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m" style="opacity:0"><span style="opacity:1"></span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;height:100px;opacity:0.1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-2"><span class="token-line-number">10 </span><span class="token-plain">​</span></div></div><div style="overflow:hidden;height:100px;opacity:0.1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-5"><span class="token-line-number"> 1 </span><span class="token-plain">      </span><span class="token-property">source</span><span class="token-plain">  </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-string">&quot;gitlabhq/gitlab&quot;</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m" style="opacity:1"><span style="opacity:1">Implement providers</span></h4></div></div></div></div></div><div class="css-gelidi"><ul class="css-16wqnxf"><li class="css-1wvf2dc"><a href="https://registry.terraform.io/browse/providers" class="css-1dn4en8">Providers</a></li></ul></div><div class="css-gelidi"><h3 class="css-11kbfa7">Can&#x27;t track changes</h3><p style="visibility:visible" class="css-1xi7gmr">Implement Repository Git.</p></div><div class="css-gelidi"><div style="width:100vw;max-width:100%;height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center" class="cs-layout"><div style="overflow:auto;height:100%;width:100%"><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden"><span class="token-line-number">1 </span><div style="display:inline-block" class="cs-line cs-line-0"><span class="token-number">2021</span><span class="token-plain">-09-29 </span><span class="token-number">23</span><span class="token-plain">:44 -0500 luis mayta o </span><span class="token-punctuation">[</span><span class="token-plain">feature/DOPS-351</span><span class="token-punctuation">]</span><span class="token-plain"> </span><span class="token-punctuation">{</span><span class="token-plain">origin/feature/DOPS-351</span><span class="token-punctuation">}</span><span class="token-plain"> feat: DOPS-351 change version terraform</span></div></div><div style="overflow:hidden;opacity:1"><div style="display:inline-block" class="cs-line cs-line-1"><span class="token-line-number">2 </span><span class="token-number">2021</span><span class="token-plain">-09-29 </span><span class="token-number">14</span><span class="token-plain">:23 -0500 luis mayta o build: DOPS-351 generate files readme</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-2"><span class="token-line-number">3 </span><span class="token-number">2021</span><span class="token-plain">-09-29 </span><span class="token-number">14</span><span class="token-plain">:22 -0500 luis mayta o fix: DOPS-351 delete name other company</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-3"><span class="token-line-number">4 </span><span class="token-number">2021</span><span class="token-plain">-09-29 </span><span class="token-number">14</span><span class="token-plain">:21 -0500 luis mayta o sample: DOPS-351 implement basic sample</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-4"><span class="token-line-number">5 </span><span class="token-number">2021</span><span class="token-plain">-09-29 </span><span class="token-number">14</span><span class="token-plain">:19 -0500 luis mayta o fix: DOPS-351 execute </span><span class="token-builtin">test</span><span class="token-plain"> using terraform </span><span class="token-builtin">test</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-5"><span class="token-line-number">6 </span><span class="token-number">2021</span><span class="token-plain">-09-29 </span><span class="token-number">14</span><span class="token-plain">:17 -0500 luis mayta o fix: DOPS-351 </span><span class="token-function">link</span><span class="token-plain"> broke load module project</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-6"><span class="token-line-number">7 </span><span class="token-number">2021</span><span class="token-plain">-09-29 </span><span class="token-number">14</span><span class="token-plain">:16 -0500 luis mayta o fix: DOPS-351 generator task </span><span class="token-keyword">for</span><span class="token-plain"> go</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m" style="opacity:0"><span style="opacity:1"></span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-0"><span class="token-line-number">1 </span><span class="token-number">2021</span><span class="token-plain">-09-29 </span><span class="token-number">23</span><span class="token-plain">:44 -0500 luis mayta o </span><span class="token-punctuation">[</span><span class="token-plain">feature/DOPS-351</span><span class="token-punctuation">]</span><span class="token-plain"> </span><span class="token-punctuation">{</span><span class="token-plain">origin/feature/DOPS-351</span><span class="token-punctuation">}</span><span class="token-plain"> feat: DOPS-351 change version terraform</span></div></div><div style="overflow:hidden;height:100px;opacity:0.1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-1"><span class="token-line-number">7 </span><span class="token-number">2021</span><span class="token-plain">-09-29 </span><span class="token-number">14</span><span class="token-plain">:23 -0500 luis mayta o build: DOPS-351 generate files readme</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m" style="opacity:1"><span style="opacity:1">Tracking commits git</span></h4></div></div></div></div></div><div class="css-gelidi"><h3 class="css-11kbfa7">Don&#x27;t know change impact</h3><ul style="visibility:visible" class="css-16wqnxf"><li class="css-1wvf2dc">terraform plan</li><li class="css-1wvf2dc">terraform apply</li><li class="css-1wvf2dc">terraform destroy</li></ul></div><div class="css-gelidi"><h3 class="css-11kbfa7">Terraform Apply</h3></div><div class="css-gelidi"><div style="width:100vw;max-width:100%;height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center" class="cs-layout"><div style="overflow:auto;height:100%;width:100%"><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-0"><span class="token-line-number"> 1 </span><span class="token-plain">  </span><span class="token-comment"># module.rancher.null_resource.provision_core will be created</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-1"><span class="token-line-number"> 2 </span><span class="token-plain">  + resource </span><span class="token-string">&quot;null_resource&quot;</span><span class="token-plain"> </span><span class="token-string">&quot;provision_core&quot;</span><span class="token-plain"> </span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-2"><span class="token-line-number"> 3 </span><span class="token-plain">      + </span><span class="token-function">id</span><span class="token-plain">       </span><span class="token-operator">=</span><span class="token-plain"> </span><span class="token-punctuation">(</span><span class="token-plain">known after apply</span><span class="token-punctuation">)</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-3"><span class="token-line-number"> 4 </span><span class="token-plain">      + triggers </span><span class="token-operator">=</span><span class="token-plain"> </span><span class="token-punctuation">(</span><span class="token-plain">known after apply</span><span class="token-punctuation">)</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-4"><span class="token-line-number"> 5 </span><span class="token-plain">    </span><span class="token-punctuation">}</span></div></div><div style="overflow:hidden;opacity:1"><div style="display:inline-block" class="cs-line cs-line-5"><span class="token-line-number"> 6 </span><span class="token-plain">​</span></div></div><div style="overflow:hidden"><span class="token-line-number"> 7 </span><div style="display:inline-block" class="cs-line cs-line-6"><span class="token-plain">  </span><span class="token-comment"># module.rancher.null_resource.provision_docker[0] will be created</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-7"><span class="token-line-number"> 8 </span><span class="token-plain">  + resource </span><span class="token-string">&quot;null_resource&quot;</span><span class="token-plain"> </span><span class="token-string">&quot;provision_docker&quot;</span><span class="token-plain"> </span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-8"><span class="token-line-number"> 9 </span><span class="token-plain">      + </span><span class="token-function">id</span><span class="token-plain">       </span><span class="token-operator">=</span><span class="token-plain"> </span><span class="token-punctuation">(</span><span class="token-plain">known after apply</span><span class="token-punctuation">)</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-9"><span class="token-line-number">10 </span><span class="token-plain">      + triggers </span><span class="token-operator">=</span><span class="token-plain"> </span><span class="token-punctuation">(</span><span class="token-plain">known after apply</span><span class="token-punctuation">)</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-10"><span class="token-line-number">11 </span><span class="token-plain">    </span><span class="token-punctuation">}</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-11"><span class="token-line-number">12 </span><span class="token-plain">​</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-12"><span class="token-line-number">13 </span><span class="token-plain">Plan: </span><span class="token-number">9</span><span class="token-plain"> to add, </span><span class="token-number">0</span><span class="token-plain"> to change, </span><span class="token-number">0</span><span class="token-plain"> to destroy.</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m" style="opacity:0"><span style="opacity:1"></span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;opacity:0.1"><div style="display:inline-block" class="cs-line cs-line-5"><span class="token-line-number">13 </span><span class="token-plain">​</span></div></div><div style="overflow:hidden;opacity:1"><div style="display:inline-block" class="cs-line cs-line-6"><span class="token-line-number"> 1 </span><span class="token-plain">  </span><span class="token-comment"># module.rancher.null_resource.provision_docker[0] will be created</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m"><span style="opacity:1">Resource to create</span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-5"><span class="token-line-number">13 </span><span class="token-plain">​</span></div></div><div style="overflow:hidden;height:100px;opacity:0.1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-6"><span class="token-line-number"> 1 </span><span class="token-plain">  </span><span class="token-comment"># module.rancher.null_resource.provision_docker[0] will be created</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m" style="opacity:1"><span style="opacity:1">Information change Impact</span></h4></div></div></div></div></div><div class="css-gelidi"><h3 class="css-11kbfa7">Need to revert a change</h3><p style="visibility:visible" class="css-1xi7gmr">git checkout tag</p></div><div class="css-gelidi"><h2 class="css-11kbfa7">Scaling Challenges</h2></div><div class="css-gelidi"><h3 class="css-11kbfa7">Multiple environments for infrastructure</h3></div><div class="css-gelidi"><div style="width:100vw;max-width:100%;height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center" class="cs-layout"><div style="overflow:auto;height:100%;width:100%"><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-0"><span class="token-plain">terraform workspace new stage</span></div></div><div></div></code></pre></div></div></div></div></div><div class="css-gelidi"><div style="width:100vw;max-width:100%;height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center" class="cs-layout"><div style="overflow:auto;height:100%;width:100%"><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-0"><span class="token-plain">terragrunt apply --terragrunt-working-dir </span><span class="token-punctuation">{</span><span class="token-punctuation">{</span><span class="token-plain">.REGION</span><span class="token-punctuation">}</span><span class="token-punctuation">}</span><span class="token-plain">/</span><span class="token-punctuation">{</span><span class="token-punctuation">{</span><span class="token-plain">.STAGE</span><span class="token-punctuation">}</span><span class="token-punctuation">}</span><span class="token-plain"> --terragrunt-source-update</span></div></div><div></div></code></pre></div></div></div></div></div><div class="css-gelidi"><div style="width:100vw;max-width:100%;height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center" class="cs-layout"><div style="overflow:auto;height:100%;width:100%"><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;opacity:1"><div style="display:inline-block" class="cs-line cs-line-0"><span class="token-line-number"> 1 </span><span class="token-plain">provision/terraform/us-east-1</span></div></div><div style="overflow:hidden;opacity:1"><div style="display:inline-block" class="cs-line cs-line-1"><span class="token-line-number"> 2 </span><span class="token-plain">├── common.yml</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-2"><span class="token-line-number"> 3 </span><span class="token-plain">├── core</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-3"><span class="token-line-number"> 4 </span><span class="token-plain">│   ├── data.tf</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-4"><span class="token-line-number"> 5 </span><span class="token-plain">│   ├── deploy.tf</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-5"><span class="token-line-number"> 6 </span><span class="token-plain">│   ├── github.tf</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-6"><span class="token-line-number"> 7 </span><span class="token-plain">│   ├── groups.tf</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-7"><span class="token-line-number"> 8 </span><span class="token-plain">│   ├── main.tf</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-8"><span class="token-line-number"> 9 </span><span class="token-plain">│   ├── terragrunt.hcl</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-9"><span class="token-line-number">10 </span><span class="token-plain">├── staging</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-10"><span class="token-line-number">11 </span><span class="token-plain">│   ├── data.tf</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-11"><span class="token-line-number">12 </span><span class="token-plain">│   ├── deploy.tf</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-12"><span class="token-line-number">13 </span><span class="token-plain">│   ├── github.tf</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-13"><span class="token-line-number">14 </span><span class="token-plain">│   ├── groups.tf</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-14"><span class="token-line-number">15 </span><span class="token-plain">│   ├── main.tf</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-15"><span class="token-line-number">16 </span><span class="token-plain">│   ├── terragrunt.hcl</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-16"><span class="token-line-number">17 </span><span class="token-plain">├── production</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-17"><span class="token-line-number">18 </span><span class="token-plain">│   ├── data.tf</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-18"><span class="token-line-number">19 </span><span class="token-plain">│   ├── deploy.tf</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-19"><span class="token-line-number">20 </span><span class="token-plain">│   ├── github.tf</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-20"><span class="token-line-number">21 </span><span class="token-plain">│   ├── groups.tf</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-21"><span class="token-line-number">22 </span><span class="token-plain">│   ├── main.tf</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-22"><span class="token-line-number">23 </span><span class="token-plain">│   ├── terragrunt.hcl</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m" style="opacity:0"><span style="opacity:1"></span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number"> 1 </span><div style="display:inline-block" class="cs-line cs-line-0"><span class="token-plain">provision/terraform/us-east-1</span></div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number">23 </span><div style="display:inline-block" class="cs-line cs-line-1"><span class="token-plain">├── common.yml</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m"><span style="opacity:1">Stage core</span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number"> 1 </span><div style="display:inline-block" class="cs-line cs-line-0"><span class="token-plain">provision/terraform/us-east-1</span></div></div><div style="overflow:hidden;opacity:0.1"><div style="display:inline-block" class="cs-line cs-line-1"><span class="token-line-number">23 </span><span class="token-plain">├── common.yml</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m"><span style="opacity:1">Stage staging</span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;height:100px;opacity:0.1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-0"><span class="token-line-number"> 1 </span><span class="token-plain">provision/terraform/us-east-1</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-1"><span class="token-line-number">23 </span><span class="token-plain">├── common.yml</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m" style="opacity:1"><span style="opacity:1">Stage production</span></h4></div></div></div></div></div><div class="css-gelidi"><h3 class="css-11kbfa7">Duplicate code</h3></div><div class="css-gelidi"><div style="width:100vw;max-width:100%;height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center" class="cs-layout"><div style="overflow:auto;height:100%;width:100%"><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-0"><span class="token-line-number">1 </span><span class="token-keyword">module</span><span class="token-type"> &quot;project_readme&quot; </span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden"><span class="token-line-number">2 </span><div style="display:inline-block" class="cs-line cs-line-1"><span class="token-plain">  </span><span class="token-property">source</span><span class="token-plain"> </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-string">&quot;git::https://gitlab.infosisglobal.com/devops-toolkit/terraform-gitlab-project.git?ref=develop&quot;</span></div></div><div style="overflow:hidden;opacity:1"><div style="display:inline-block" class="cs-line cs-line-2"><span class="token-line-number">3 </span><span class="token-plain">  ...</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-3"><span class="token-line-number">4 </span><span class="token-punctuation">}</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-4"><span class="token-line-number">5 </span><span class="token-plain">​</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-5"><span class="token-line-number">6 </span><span class="token-keyword">module</span><span class="token-type"> &quot;project_readme&quot; </span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-6"><span class="token-line-number">7 </span><span class="token-plain">  </span><span class="token-property">source</span><span class="token-plain"> </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-string">&quot;infosisarg/project/gitlab&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-7"><span class="token-line-number">8 </span><span class="token-plain">  </span><span class="token-property">version</span><span class="token-plain"> </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-string">&quot;develop&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-8"><span class="token-line-number">9 </span><span class="token-punctuation">}</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m" style="opacity:0"><span style="opacity:1"></span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;opacity:1"><div style="display:inline-block" class="cs-line cs-line-1"><span class="token-line-number">1 </span><span class="token-plain">  </span><span class="token-property">source</span><span class="token-plain"> </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-string">&quot;git::https://gitlab.infosisglobal.com/devops-toolkit/terraform-gitlab-project.git?ref=develop&quot;</span></div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number">9 </span><div style="display:inline-block" class="cs-line cs-line-2"><span class="token-plain">  ...</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m"><span style="opacity:1">Import module by git</span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;height:100px;opacity:0.1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-1"><span class="token-line-number">1 </span><span class="token-plain">  </span><span class="token-property">source</span><span class="token-plain"> </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-string">&quot;git::https://gitlab.infosisglobal.com/devops-toolkit/terraform-gitlab-project.git?ref=develop&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:0.1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-2"><span class="token-line-number">9 </span><span class="token-plain">  ...</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m" style="opacity:1"><span style="opacity:1">Import module by namespace</span></h4></div></div></div></div></div><div class="css-gelidi"><ul class="css-16wqnxf"><li class="css-1wvf2dc"><a href="https://registry.terraform.io/browse/modules" class="css-1dn4en8">Modules</a></li></ul></div><div class="css-gelidi"><h3 class="css-11kbfa7">Managing secrets</h3></div><div class="css-gelidi"><div style="width:100vw;max-width:100%;height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center" class="cs-layout"><div style="overflow:auto;height:100%;width:100%"><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;opacity:1"><div style="display:inline-block" class="cs-line cs-line-0"><span class="token-line-number"> 1 </span><span class="token-keyword">resource </span><span class="token-type">&quot;aws_db_instance&quot;</span><span class="token-plain"> </span><span class="token-string">&quot;example&quot;</span><span class="token-plain"> </span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-1"><span class="token-line-number"> 2 </span><span class="token-plain">  </span><span class="token-property">engine</span><span class="token-plain">               </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-string">&quot;mysql&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-2"><span class="token-line-number"> 3 </span><span class="token-plain">  </span><span class="token-property">engine_version</span><span class="token-plain">       </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-string">&quot;5.7&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-3"><span class="token-line-number"> 4 </span><span class="token-plain">  </span><span class="token-property">instance_class</span><span class="token-plain">       </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-string">&quot;db.t2.micro&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-4"><span class="token-line-number"> 5 </span><span class="token-plain">  </span><span class="token-property">name</span><span class="token-plain">                 </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-string">&quot;example&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-5"><span class="token-line-number"> 6 </span><span class="token-plain">  </span><span class="token-comment"># DO NOT DO THIS!!!</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-6"><span class="token-line-number"> 7 </span><span class="token-plain">  </span><span class="token-property">username</span><span class="token-plain"> </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-string">&quot;admin&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-7"><span class="token-line-number"> 8 </span><span class="token-plain">  </span><span class="token-property">password</span><span class="token-plain"> </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-string">&quot;password&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-8"><span class="token-line-number"> 9 </span><span class="token-plain">  </span><span class="token-comment"># DO NOT DO THIS!!!</span></div></div><div style="overflow:hidden;opacity:1"><div style="display:inline-block" class="cs-line cs-line-9"><span class="token-line-number">10 </span><span class="token-punctuation">}</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m" style="opacity:0"><span style="opacity:1"></span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;height:100px;opacity:0.1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-0"><span class="token-line-number"> 1 </span><span class="token-keyword">resource </span><span class="token-type">&quot;aws_db_instance&quot;</span><span class="token-plain"> </span><span class="token-string">&quot;example&quot;</span><span class="token-plain"> </span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:0.1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-9"><span class="token-line-number">10 </span><span class="token-punctuation">}</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m" style="opacity:1"><span style="opacity:1">do NOT hard-code your database credentials</span></h4></div></div></div></div></div><div class="css-gelidi"><ul class="css-16wqnxf"><li class="css-1wvf2dc"><a href="https://aws.amazon.com/kms/KMS" class="css-1dn4en8">AWS KMS</a></li><li class="css-1wvf2dc"><a href="https://github.com/mozilla/sops" class="css-1dn4en8">SOPS</a></li><li class="css-1wvf2dc">...</li></ul></div><div class="css-gelidi"><ul class="css-16wqnxf"><li class="css-1wvf2dc"><a href="https://github.com/mozilla/sops" class="css-1dn4en8">SOPS</a></li></ul></div><div class="css-gelidi"><div style="width:100vw;max-width:100%;height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center" class="cs-layout"><div style="overflow:auto;height:100%;width:100%"><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-0"><span class="token-line-number">1 </span><span class="token-key">keys</span><span class="token-punctuation">:</span></div></div><div style="overflow:hidden"><span class="token-line-number">2 </span><div style="display:inline-block" class="cs-line cs-line-1"><span class="token-plain">  </span><span class="token-punctuation">-</span><span class="token-plain"> </span><span class="token-important">&amp;infrastructure</span><span class="token-plain"> 8589224DCEDE55F0CDD9FA6C4339A0A5AACCBE16</span></div></div><div style="overflow:hidden;opacity:1"><div style="display:inline-block" class="cs-line cs-line-2"><span class="token-line-number">3 </span><span class="token-key">creation_rules</span><span class="token-punctuation">:</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-3"><span class="token-line-number">4 </span><span class="token-plain">  </span><span class="token-punctuation">-</span><span class="token-plain"> </span><span class="token-key">path_regex</span><span class="token-punctuation">:</span><span class="token-plain"> .</span><span class="token-important">*/secrets/.*\.(enc|yml|yaml)$</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-4"><span class="token-line-number">5 </span><span class="token-plain">    </span><span class="token-key">key_groups</span><span class="token-punctuation">:</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-5"><span class="token-line-number">6 </span><span class="token-plain">      </span><span class="token-punctuation">-</span><span class="token-plain"> </span><span class="token-key">pgp</span><span class="token-punctuation">:</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-6"><span class="token-line-number">7 </span><span class="token-plain">          </span><span class="token-punctuation">-</span><span class="token-plain"> </span><span class="token-important">*infrastructure</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m" style="opacity:0"><span style="opacity:1"></span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;opacity:1"><div style="display:inline-block" class="cs-line cs-line-1"><span class="token-line-number">1 </span><span class="token-plain">  </span><span class="token-punctuation">-</span><span class="token-plain"> </span><span class="token-important">&amp;infrastructure</span><span class="token-plain"> 8589224DCEDE55F0CDD9FA6C4339A0A5AACCBE16</span></div></div><div style="overflow:hidden;opacity:0.1"><div style="display:inline-block" class="cs-line cs-line-2"><span class="token-line-number">7 </span><span class="token-key">creation_rules</span><span class="token-punctuation">:</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m"><span style="opacity:1">Key pgp public</span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;height:100px;opacity:0.1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-1"><span class="token-line-number">1 </span><span class="token-plain">  </span><span class="token-punctuation">-</span><span class="token-plain"> </span><span class="token-important">&amp;infrastructure</span><span class="token-plain"> 8589224DCEDE55F0CDD9FA6C4339A0A5AACCBE16</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-2"><span class="token-line-number">7 </span><span class="token-key">creation_rules</span><span class="token-punctuation">:</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m" style="opacity:1"><span style="opacity:1">Implement rules for secrets files</span></h4></div></div></div></div></div><div class="css-gelidi"><div style="width:100vw;max-width:100%;height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center" class="cs-layout"><div style="overflow:auto;height:100%;width:100%"><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-0"><span class="token-line-number">1 </span><span class="token-key">db</span><span class="token-punctuation">:</span></div></div><div style="overflow:hidden;opacity:1"><div style="display:inline-block" class="cs-line cs-line-1"><span class="token-line-number">2 </span><span class="token-plain">    </span><span class="token-key">username</span><span class="token-punctuation">:</span><span class="token-plain"> ENC</span><span class="token-punctuation">[</span><span class="token-plain">AES256_GCM</span><span class="token-punctuation">,</span><span class="token-plain">data</span><span class="token-punctuation">:</span><span class="token-plain">dZtfXGj1+kCcItw=</span><span class="token-punctuation">,</span><span class="token-plain">iv</span><span class="token-punctuation">:</span><span class="token-punctuation">...</span><span class="token-punctuation">,</span><span class="token-plain">tag</span><span class="token-punctuation">:</span><span class="token-punctuation">...</span><span class="token-plain">type</span><span class="token-punctuation">:</span><span class="token-plain">str</span><span class="token-punctuation">]</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-2"><span class="token-line-number">3 </span><span class="token-plain">    </span><span class="token-key">password</span><span class="token-punctuation">:</span><span class="token-plain"> ENC</span><span class="token-punctuation">[</span><span class="token-plain">AES256_GCM</span><span class="token-punctuation">,</span><span class="token-plain">data</span><span class="token-punctuation">:</span><span class="token-punctuation">...</span><span class="token-punctuation">,</span><span class="token-plain">iv</span><span class="token-punctuation">:</span><span class="token-punctuation">...</span><span class="token-punctuation">,</span><span class="token-plain">tag</span><span class="token-punctuation">:</span><span class="token-punctuation">...</span><span class="token-punctuation">,</span><span class="token-plain">type</span><span class="token-punctuation">:</span><span class="token-plain">str</span><span class="token-punctuation">]</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m" style="opacity:0"><span style="opacity:1"></span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;opacity:0.1"><div style="display:inline-block" class="cs-line cs-line-1"><span class="token-line-number">3 </span><span class="token-plain">    </span><span class="token-key">username</span><span class="token-punctuation">:</span><span class="token-plain"> ENC</span><span class="token-punctuation">[</span><span class="token-plain">AES256_GCM</span><span class="token-punctuation">,</span><span class="token-plain">data</span><span class="token-punctuation">:</span><span class="token-plain">dZtfXGj1+kCcItw=</span><span class="token-punctuation">,</span><span class="token-plain">iv</span><span class="token-punctuation">:</span><span class="token-punctuation">...</span><span class="token-punctuation">,</span><span class="token-plain">tag</span><span class="token-punctuation">:</span><span class="token-punctuation">...</span><span class="token-plain">type</span><span class="token-punctuation">:</span><span class="token-plain">str</span><span class="token-punctuation">]</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m"><span style="opacity:1">Values for username encrypted</span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-1"><span class="token-line-number">3 </span><span class="token-plain">    </span><span class="token-key">username</span><span class="token-punctuation">:</span><span class="token-plain"> ENC</span><span class="token-punctuation">[</span><span class="token-plain">AES256_GCM</span><span class="token-punctuation">,</span><span class="token-plain">data</span><span class="token-punctuation">:</span><span class="token-plain">dZtfXGj1+kCcItw=</span><span class="token-punctuation">,</span><span class="token-plain">iv</span><span class="token-punctuation">:</span><span class="token-punctuation">...</span><span class="token-punctuation">,</span><span class="token-plain">tag</span><span class="token-punctuation">:</span><span class="token-punctuation">...</span><span class="token-plain">type</span><span class="token-punctuation">:</span><span class="token-plain">str</span><span class="token-punctuation">]</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m" style="opacity:1"><span style="opacity:1">Values for password encrypted</span></h4></div></div></div></div></div><div class="css-gelidi"><div style="width:100vw;max-width:100%;height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center" class="cs-layout"><div style="overflow:auto;height:100%;width:100%"><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-15"><span class="token-line-number"> 1 </span><span class="token-keyword">locals</span><span class="token-plain"> </span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;opacity:1"><div style="display:inline-block" class="cs-line cs-line-16"><span class="token-line-number"> 2 </span><span class="token-plain">  </span><span class="token-property">secrets</span><span class="token-plain"> </span><span class="token-punctuation">=</span><span class="token-plain"> yamldecode(sops_decrypt_file((</span><span class="token-string">&quot;secrets.yml&quot;</span><span class="token-plain">)))</span></div></div><div style="overflow:hidden;opacity:1"><div style="display:inline-block" class="cs-line cs-line-17"><span class="token-line-number"> 3 </span><span class="token-punctuation">}</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m" style="opacity:0"><span style="opacity:1"></span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;transform:translateX(250px);height:0;opacity:0"><div style="display:inline-block" class="cs-line cs-line-13"><span class="token-line-number"> 1 </span><span class="token-plain">  </span><span class="token-property">username</span><span class="token-plain"> </span><span class="token-punctuation">=</span><span class="token-plain"> local.secrets.db.username</span></div></div><div style="overflow:hidden;height:100px;opacity:0.1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-16"><span class="token-line-number"> 1 </span><span class="token-plain">  </span><span class="token-property">secrets</span><span class="token-plain"> </span><span class="token-punctuation">=</span><span class="token-plain"> yamldecode(sops_decrypt_file((</span><span class="token-string">&quot;secrets.yml&quot;</span><span class="token-plain">)))</span></div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number"> 3 </span><div style="display:inline-block" class="cs-line cs-line-17"><span class="token-punctuation">}</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m" style="opacity:1"><span style="opacity:1">import values encrypted</span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;opacity:1"><div style="display:inline-block" class="cs-line cs-line-13"><span class="token-line-number"> 1 </span><span class="token-plain">  </span><span class="token-property">username</span><span class="token-plain"> </span><span class="token-punctuation">=</span><span class="token-plain"> local.secrets.db.username</span></div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number"> 4 </span><div style="display:inline-block" class="cs-line cs-line-17"><span class="token-punctuation">}</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m" style="opacity:0"><span style="opacity:1"></span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number"> 1 </span><div style="display:inline-block" class="cs-line cs-line-13"><span class="token-plain">  </span><span class="token-property">username</span><span class="token-plain"> </span><span class="token-punctuation">=</span><span class="token-plain"> local.secrets.db.username</span></div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number"> 4 </span><div style="display:inline-block" class="cs-line cs-line-17"><span class="token-punctuation">}</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m"><span style="opacity:1">pass username inputs to your Terraform</span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;transform:translateX(250px);height:0;opacity:0"><div style="display:inline-block" class="cs-line cs-line-9"><span class="token-line-number"> 1 </span><span class="token-plain">  </span><span class="token-property">description</span><span class="token-plain"> </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-string">&quot;The username for the DB master user&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:0.1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-13"><span class="token-line-number"> 1 </span><span class="token-plain">  </span><span class="token-property">username</span><span class="token-plain"> </span><span class="token-punctuation">=</span><span class="token-plain"> local.secrets.db.username</span></div></div><div style="overflow:hidden;opacity:0.1"><div style="display:inline-block" class="cs-line cs-line-17"><span class="token-line-number"> 4 </span><span class="token-punctuation">}</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m" style="opacity:1"><span style="opacity:1">pass password as inputs to your Terraform</span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;opacity:1"><div style="display:inline-block" class="cs-line cs-line-9"><span class="token-line-number"> 1 </span><span class="token-plain">  </span><span class="token-property">description</span><span class="token-plain"> </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-string">&quot;The username for the DB master user&quot;</span></div></div><div style="overflow:hidden;opacity:1"><div style="display:inline-block" class="cs-line cs-line-17"><span class="token-line-number">11 </span><span class="token-punctuation">}</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m" style="opacity:0"><span style="opacity:1"></span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;transform:translateX(250px);height:0;opacity:0"><div style="display:inline-block" class="cs-line cs-line-0"><span class="token-line-number"> 1 </span><span class="token-keyword">resource </span><span class="token-type">&quot;aws_db_instance&quot;</span><span class="token-plain"> </span><span class="token-string">&quot;example&quot;</span><span class="token-plain"> </span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:0.1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-9"><span class="token-line-number"> 1 </span><span class="token-plain">  </span><span class="token-property">description</span><span class="token-plain"> </span><span class="token-punctuation">=</span><span class="token-plain"> </span><span class="token-string">&quot;The username for the DB master user&quot;</span></div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number">11 </span><div style="display:inline-block" class="cs-line cs-line-17"><span class="token-punctuation">}</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m" style="opacity:1"><span style="opacity:1">Enabled sensitive</span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;opacity:1"><div style="display:inline-block" class="cs-line cs-line-0"><span class="token-line-number"> 1 </span><span class="token-keyword">resource </span><span class="token-type">&quot;aws_db_instance&quot;</span><span class="token-plain"> </span><span class="token-string">&quot;example&quot;</span><span class="token-plain"> </span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number"> 9 </span><div style="display:inline-block" class="cs-line cs-line-17"><span class="token-punctuation">}</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m" style="opacity:0"><span style="opacity:1"></span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;height:100px;opacity:0.1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-0"><span class="token-line-number"> 1 </span><span class="token-keyword">resource </span><span class="token-type">&quot;aws_db_instance&quot;</span><span class="token-plain"> </span><span class="token-string">&quot;example&quot;</span><span class="token-plain"> </span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:0.1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-17"><span class="token-line-number"> 9 </span><span class="token-punctuation">}</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m" style="opacity:1"><span style="opacity:1">Implement values database</span></h4></div></div></div></div></div><div class="css-gelidi"><h3 class="css-11kbfa7">Infrastructure Testing</h3></div><div class="css-gelidi"><ul class="css-16wqnxf"><li class="css-1wvf2dc"><a href="https://terratest.gruntwork.io" class="css-1dn4en8">Terratest</a></li></ul></div><div class="css-gelidi"><div style="width:100vw;max-width:100%;height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center" class="cs-layout"><div style="overflow:auto;height:100%;width:100%"><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-0"><span class="token-line-number"> 1 </span><span class="token-keyword">package</span><span class="token-plain"> test</span></div></div><div style="overflow:hidden;opacity:1"><div style="display:inline-block" class="cs-line cs-line-1"><span class="token-line-number"> 2 </span><span class="token-plain">​</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-2"><span class="token-line-number"> 3 </span><span class="token-keyword">import</span><span class="token-plain"> </span><span class="token-punctuation">(</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-3"><span class="token-line-number"> 4 </span><span class="token-plain">    </span><span class="token-string">&quot;testing&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-4"><span class="token-line-number"> 5 </span><span class="token-plain">​</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-5"><span class="token-line-number"> 6 </span><span class="token-plain">    </span><span class="token-string">&quot;github.com/gruntwork-io/terratest/modules/terraform&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-6"><span class="token-line-number"> 7 </span><span class="token-plain">    </span><span class="token-string">&quot;github.com/stretchr/testify/assert&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-7"><span class="token-line-number"> 8 </span><span class="token-punctuation">)</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-8"><span class="token-line-number"> 9 </span><span class="token-plain">​</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-9"><span class="token-line-number">10 </span><span class="token-keyword">func</span><span class="token-plain"> </span><span class="token-function">TestBasicSuccess</span><span class="token-punctuation">(</span><span class="token-plain">t </span><span class="token-operator">*</span><span class="token-plain">testing</span><span class="token-punctuation">.</span><span class="token-plain">T</span><span class="token-punctuation">)</span><span class="token-plain"> </span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-10"><span class="token-line-number">11 </span><span class="token-plain">    t</span><span class="token-punctuation">.</span><span class="token-function">Parallel</span><span class="token-punctuation">(</span><span class="token-punctuation">)</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-11"><span class="token-line-number">12 </span><span class="token-plain">​</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-12"><span class="token-line-number">13 </span><span class="token-plain">    name </span><span class="token-operator">:=</span><span class="token-plain"> </span><span class="token-string">&quot;name server&quot;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-13"><span class="token-line-number">14 </span><span class="token-plain">​</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-14"><span class="token-line-number">15 </span><span class="token-plain">    terraformOptions </span><span class="token-operator">:=</span><span class="token-plain"> </span><span class="token-operator">&amp;</span><span class="token-plain">terraform</span><span class="token-punctuation">.</span><span class="token-plain">Options</span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-15"><span class="token-line-number">16 </span><span class="token-plain">        </span><span class="token-comment">// The path to where your Terraform code is located</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-16"><span class="token-line-number">17 </span><span class="token-plain">        TerraformDir</span><span class="token-punctuation">:</span><span class="token-plain"> </span><span class="token-string">&quot;instance-basic&quot;</span><span class="token-punctuation">,</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-17"><span class="token-line-number">18 </span><span class="token-plain">        Upgrade</span><span class="token-punctuation">:</span><span class="token-plain">      </span><span class="token-boolean">true</span><span class="token-punctuation">,</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-18"><span class="token-line-number">19 </span><span class="token-plain">        Vars</span><span class="token-punctuation">:</span><span class="token-plain"> </span><span class="token-keyword">map</span><span class="token-punctuation">[</span><span class="token-builtin">string</span><span class="token-punctuation">]</span><span class="token-keyword">interface</span><span class="token-punctuation">{</span><span class="token-punctuation">}</span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-19"><span class="token-line-number">20 </span><span class="token-plain">            </span><span class="token-string">&quot;name&quot;</span><span class="token-punctuation">:</span><span class="token-plain">        name</span><span class="token-punctuation">,</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-20"><span class="token-line-number">21 </span><span class="token-plain">        </span><span class="token-punctuation">}</span><span class="token-punctuation">,</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-21"><span class="token-line-number">22 </span><span class="token-plain">    </span><span class="token-punctuation">}</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-22"><span class="token-line-number">23 </span><span class="token-plain">​</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-23"><span class="token-line-number">24 </span><span class="token-plain">    </span><span class="token-comment">// At the end of the test, run `terraform destroy` to clean up any resources that were created</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-24"><span class="token-line-number">25 </span><span class="token-plain">    </span><span class="token-keyword">defer</span><span class="token-plain"> terraform</span><span class="token-punctuation">.</span><span class="token-function">Destroy</span><span class="token-punctuation">(</span><span class="token-plain">t</span><span class="token-punctuation">,</span><span class="token-plain"> terraformOptions</span><span class="token-punctuation">)</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-25"><span class="token-line-number">26 </span><span class="token-plain">​</span></div></div><div style="overflow:hidden;opacity:1"><div style="display:inline-block" class="cs-line cs-line-26"><span class="token-line-number">27 </span><span class="token-plain">    </span><span class="token-comment">// This will run `terraform init` and `terraform apply` and fail the test if there are any errors</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-27"><span class="token-line-number">28 </span><span class="token-plain">    terraform</span><span class="token-punctuation">.</span><span class="token-function">InitAndApply</span><span class="token-punctuation">(</span><span class="token-plain">t</span><span class="token-punctuation">,</span><span class="token-plain"> terraformOptions</span><span class="token-punctuation">)</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-28"><span class="token-line-number">29 </span><span class="token-plain">    outputInstance </span><span class="token-operator">:=</span><span class="token-plain"> terraform</span><span class="token-punctuation">.</span><span class="token-function">Output</span><span class="token-punctuation">(</span><span class="token-plain">t</span><span class="token-punctuation">,</span><span class="token-plain"> terraformOptions</span><span class="token-punctuation">,</span><span class="token-plain"> </span><span class="token-string">&quot;instance&quot;</span><span class="token-punctuation">)</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-29"><span class="token-line-number">30 </span><span class="token-plain">    assert</span><span class="token-punctuation">.</span><span class="token-function">NotEmpty</span><span class="token-punctuation">(</span><span class="token-plain">t</span><span class="token-punctuation">,</span><span class="token-plain"> outputInstance</span><span class="token-punctuation">,</span><span class="token-plain"> outputInstance</span><span class="token-punctuation">)</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-30"><span class="token-line-number">31 </span><span class="token-punctuation">}</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m" style="opacity:0"><span style="opacity:1"></span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number">31 </span><div style="display:inline-block" class="cs-line cs-line-1"><span class="token-plain">​</span></div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number"> 1 </span><div style="display:inline-block" class="cs-line cs-line-26"><span class="token-plain">    </span><span class="token-comment">// This will run `terraform init` and `terraform apply` and fail the test if there are any errors</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m"><span style="opacity:1">Import Libraries</span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number">31 </span><div style="display:inline-block" class="cs-line cs-line-1"><span class="token-plain">​</span></div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number"> 1 </span><div style="display:inline-block" class="cs-line cs-line-26"><span class="token-plain">    </span><span class="token-comment">// This will run `terraform init` and `terraform apply` and fail the test if there are any errors</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m"><span style="opacity:1">Set values for module</span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number">31 </span><div style="display:inline-block" class="cs-line cs-line-1"><span class="token-plain">​</span></div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number"> 1 </span><div style="display:inline-block" class="cs-line cs-line-26"><span class="token-plain">    </span><span class="token-comment">// This will run `terraform init` and `terraform apply` and fail the test if there are any errors</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m"><span style="opacity:1">Execute terraform</span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number">31 </span><div style="display:inline-block" class="cs-line cs-line-1"><span class="token-plain">​</span></div></div><div style="overflow:hidden;opacity:0.1"><span class="token-line-number"> 1 </span><div style="display:inline-block" class="cs-line cs-line-26"><span class="token-plain">    </span><span class="token-comment">// This will run `terraform init` and `terraform apply` and fail the test if there are any errors</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m"><span style="opacity:1">Validate response</span></h4></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-nx6kmc" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-710r11" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;height:100px;opacity:0.1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-1"><span class="token-line-number">31 </span><span class="token-plain">​</span></div></div><div style="overflow:hidden;height:100px;opacity:0.1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-26"><span class="token-line-number"> 1 </span><span class="token-plain">    </span><span class="token-comment">// This will run `terraform init` and `terraform apply` and fail the test if there are any errors</span></div></div><div></div></code></pre><h4 class="cs-title css-qb9c5m" style="opacity:1"><span style="opacity:1">Destroy if an error occurs</span></h4></div></div></div></div></div><div class="css-gelidi"><h2 class="css-11kbfa7">Thank you</h2><br/><h4 class="css-11kbfa7"><a href="https://github.com/luismayta" class="css-1dn4en8">@luismayta</a></h4><br/><h4 class="css-11kbfa7"><style data-emotion-css="zmr78e">.css-zmr78e{font-family:"Victor Mono";}</style><code class="css-zmr78e">&lt;/Code&gt;</code></h4></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/print";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-12fcfaa8362ee6e55860.js"],"app":["/app-78635804c9e92eb3a3e9.js"],"component---node-modules-gatsby-theme-mdx-deck-src-templates-deck-js":["/component---node-modules-gatsby-theme-mdx-deck-src-templates-deck-js-b1b9b44d697ce1372ba8.js"]};/*]]>*/</script><script src="/slides-iac-challenger/polyfill-12fcfaa8362ee6e55860.js" nomodule=""></script><script src="/slides-iac-challenger/component---node-modules-gatsby-theme-mdx-deck-src-templates-deck-js-b1b9b44d697ce1372ba8.js" async=""></script><script src="/slides-iac-challenger/app-78635804c9e92eb3a3e9.js" async=""></script><script src="/slides-iac-challenger/styles-29163f9dced6fe4a408a.js" async=""></script><script src="/slides-iac-challenger/framework-ed27f52ff8eaea3694b1.js" async=""></script><script src="/slides-iac-challenger/webpack-runtime-414f95d41cdfda2cd194.js" async=""></script></body></html>